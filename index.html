<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kitty Travel App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <!-- ÂºïÂÖ•ÂèØÊÑõÂúìÈ´îÂ≠óÂûã (Â¶ÇÊûúÊúâ) -->
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        kitty: {
                            bg: '#FFF0F5',      /* Lavender Blush Ê•µÊ∑∫Á≤â */
                            card: '#FFFFFF',    /* Á¥îÁôΩ */
                            text: '#5D4037',    /* Ê∑±ÂíñÂï°Ëâ≤ (ÊØîÁ¥îÈªëÊõ¥ÊüîÂíå) */
                            pink: '#FF69B4',    /* Hot Pink ‰∫ÆÁ≤âÁ¥Ö */
                            light: '#FFB7C5',   /* Ê´ªËä±Á≤â */
                            red: '#FF0000'      /* Ëù¥Ëù∂ÁµêÁ¥Ö */
                        }
                    },
                    fontFamily: {
                        sans: ['Varela Round', 'Helvetica Rounded', 'Arial', 'sans-serif'],
                    },
                    boxShadow: {
                        'cute': '0 4px 14px 0 rgba(255, 105, 180, 0.3)',
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #ffe4e1; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        /* Ëù¥Ëù∂ÁµêË£ùÈ£æ */
        .bow-icon::before { content: 'üéÄ'; margin-right: 4px; }
    </style>
</head>
<body class="text-kitty-text h-screen flex justify-center overflow-hidden font-sans">

    <div id="app" class="w-full max-w-md bg-kitty-bg h-full flex flex-col shadow-2xl relative overflow-hidden border-x-4 border-white">
        
        <!-- Header: Hello Kitty È¢®Ê†º -->
        <header class="bg-kitty-pink px-6 py-4 shadow-md z-10 flex justify-between items-center flex-shrink-0 text-white rounded-b-[2rem]">
            <div class="flex items-center gap-2">
                <span class="text-2xl">üéÄ</span>
                <h1 class="text-xl font-bold tracking-wider">{{ currentTitle }}</h1>
            </div>
            <div class="text-xs bg-white/20 px-3 py-1 rounded-full font-bold">{{ currentDate }}</div>
        </header>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto p-4 space-y-4 no-scrollbar pb-24">
            
            <!-- 1. Ë°åÁ®ãË°®ÂäüËÉΩ (Âê´Âú∞Âúñ) -->
            <div v-if="currentTab === 'schedule'" class="space-y-4">
                
                <!-- Êñ∞Â¢ûË°åÁ®ãÊåâÈàï -->
                <button v-if="!showScheduleForm" @click="showScheduleForm = true" class="w-full py-3 bg-white border-2 border-dashed border-kitty-pink rounded-3xl text-kitty-pink hover:bg-kitty-pink hover:text-white transition flex justify-center items-center gap-2 font-bold shadow-sm">
                    <i class="ri-add-line text-xl"></i> Ê∑ªÂä†Êñ∞Ë°åÁ®ã
                </button>

                <!-- Êñ∞Â¢ûË°åÁ®ãË°®ÂñÆ -->
                <div v-if="showScheduleForm" class="bg-white p-5 rounded-3xl shadow-cute border-2 border-kitty-light relative">
                    <button @click="showScheduleForm = false" class="absolute top-3 right-3 text-kitty-light hover:text-kitty-red"><i class="ri-close-circle-fill text-2xl"></i></button>
                    <h3 class="text-center text-kitty-pink font-bold mb-4">‚ú® New Plan ‚ú®</h3>
                    
                    <div class="space-y-3">
                        <div class="flex gap-2">
                            <input type="time" v-model="newSchedule.time" class="bg-kitty-bg rounded-xl p-2 text-sm focus:outline-none focus:ring-2 focus:ring-kitty-pink text-kitty-text w-1/3">
                            <select v-model="newSchedule.weather" class="bg-kitty-bg rounded-xl p-2 text-sm flex-1 focus:outline-none focus:ring-2 focus:ring-kitty-pink text-kitty-text">
                                <option value="‚òÄÔ∏è">‚òÄÔ∏è Êô¥Â§©</option>
                                <option value="‚òÅÔ∏è">‚òÅÔ∏è Â§öÈõ≤</option>
                                <option value="üåßÔ∏è">üåßÔ∏è Èõ®Â§©</option>
                                <option value="üå∏">üå∏ Ë≥ûËä±</option>
                                <option value="üõçÔ∏è">üõçÔ∏è Ë≥ºÁâ©</option>
                            </select>
                        </div>
                        <input type="text" v-model="newSchedule.title" placeholder="Ë¶ÅÂÅö‰ªÄÈ∫ºÂë¢Ôºü(Ê®ôÈ°å)" class="w-full bg-kitty-bg rounded-xl p-3 text-sm focus:outline-none focus:ring-2 focus:ring-kitty-pink">
                        <input type="text" v-model="newSchedule.location" placeholder="Âú∞ÈªûÂú®Âì™Ë£°Ôºü(Áî®ÊñºÂú∞Âúñ)" class="w-full bg-kitty-bg rounded-xl p-3 text-sm focus:outline-none focus:ring-2 focus:ring-kitty-pink">
                        <button @click="addScheduleItem" class="w-full bg-kitty-pink text-white py-2 rounded-xl font-bold shadow-md hover:bg-kitty-red transition">Âä†ÂÖ•Ë°åÁ®ã üíñ</button>
                    </div>
                </div>

                <!-- Ë°åÁ®ãÂàóË°® -->
                <div class="space-y-3">
                    <div v-for="(item, index) in sortedSchedule" :key="index" class="bg-white p-4 rounded-3xl shadow-sm border border-pink-100 relative overflow-hidden">
                        <!-- Ë£ùÈ£æÂúìÈªû -->
                        <div class="absolute -top-2 -right-2 w-8 h-8 bg-kitty-light rounded-full opacity-20"></div>

                        <div class="flex items-start">
                            <div class="flex flex-col items-center mr-4 min-w-[3.5rem] bg-kitty-bg rounded-2xl py-2">
                                <span class="text-2xl mb-1">{{ item.weather }}</span>
                                <span class="text-xs font-bold text-kitty-pink">{{ item.time }}</span>
                            </div>
                            <div class="flex-1 pt-1">
                                <h3 class="font-bold text-lg text-kitty-text">{{ item.title }}</h3>
                                <div class="flex items-center gap-1 text-xs text-gray-400 mt-1">
                                    <i class="ri-map-pin-line text-kitty-pink"></i>
                                    <span>{{ item.location || 'Êú™ÊåáÂÆöÂú∞Èªû' }}</span>
                                </div>
                            </div>
                            <button @click="removeSchedule(index)" class="text-gray-300 hover:text-kitty-red px-2">
                                <i class="ri-delete-bin-line"></i>
                            </button>
                        </div>

                        <!-- Â±ïÈñãÂú∞ÂúñÊåâÈàï -->
                        <div v-if="item.location" class="mt-3 border-t border-dashed border-pink-100 pt-2">
                            <button @click="item.showMap = !item.showMap" class="w-full text-xs text-kitty-pink font-bold flex justify-center items-center gap-1 hover:bg-pink-50 py-1 rounded-lg transition">
                                <i :class="item.showMap ? 'ri-arrow-up-s-line' : 'ri-map-2-fill'"></i>
                                {{ item.showMap ? 'Êî∂Ëµ∑Âú∞Âúñ' : 'Êü•ÁúãÂç≥ÊôÇÂú∞Âúñ' }}
                            </button>
                            
                            <!-- ÂµåÂÖ•ÂºèÂú∞Âúñ (ÂãïÊÖãËºâÂÖ•) -->
                            <div v-if="item.showMap" class="mt-2 h-48 rounded-xl overflow-hidden shadow-inner border-2 border-kitty-light">
                                <iframe 
                                    width="100%" 
                                    height="100%" 
                                    frameborder="0" 
                                    style="border:0" 
                                    :src="getMapUrl(item.location)" 
                                    allowfullscreen>
                                </iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2. Âú∞ÂúñÂäüËÉΩ (Á∏ΩË¶Ω) -->
            <div v-if="currentTab === 'map'" class="h-full bg-white rounded-3xl overflow-hidden shadow-cute border-4 border-white relative min-h-[500px]">
                <iframe 
                    width="100%" 
                    height="100%" 
                    frameborder="0" 
                    scrolling="no" 
                    src="https://maps.google.com/maps?q=Hong+Kong&t=&z=13&ie=UTF8&iwloc=&output=embed">
                </iframe>
                <div class="absolute top-4 left-4 bg-white/90 px-4 py-2 rounded-full shadow-lg text-kitty-pink font-bold border-2 border-kitty-pink text-xs">
                    üìç My Kitty Map
                </div>
            </div>

            <!-- 3. Ë®òÂ∏≥ÂäüËÉΩ -->
            <div v-if="currentTab === 'finance'" class="space-y-4">
                <div class="bg-white p-5 rounded-3xl shadow-cute border border-pink-100">
                    <div class="flex justify-center mb-4">
                        <div class="w-16 h-1 bg-gray-100 rounded-full"></div>
                    </div>
                    <div class="mb-3">
                        <label class="text-xs text-kitty-light font-bold ml-1">ÈáëÈ°ç $$$</label>
                        <input type="number" v-model="newExpense.amount" placeholder="0.00" class="w-full text-3xl font-bold text-kitty-text border-b-2 border-pink-100 focus:outline-none focus:border-kitty-pink pb-1 bg-transparent placeholder-pink-100">
                    </div>
                    <div class="mb-3">
                        <label class="text-xs text-kitty-light font-bold ml-1">Ë≤∑‰∫Ü‰ªÄÈ∫ºÔºü</label>
                        <input type="text" v-model="newExpense.desc" placeholder="‰æãÂ¶ÇÔºöÂèØÊÑõÁöÑÁé©ÂÅ∂" class="w-full text-sm border-b-2 border-pink-100 focus:outline-none focus:border-kitty-pink pb-1 bg-transparent">
                    </div>
                    <div class="flex gap-2 mt-4">
                        <select v-model="newExpense.type" class="flex-1 bg-kitty-bg text-sm p-3 rounded-xl focus:outline-none text-kitty-text font-bold">
                            <option value="‰ø°Áî®Âç°">üí≥ ‰ø°Áî®Âç°</option>
                            <option value="ÁèæÈáë">üíµ ÁèæÈáë</option>
                        </select>
                        <button @click="addExpense" class="bg-kitty-pink text-white px-6 py-2 rounded-xl text-sm font-bold shadow-md hover:bg-kitty-red transition">Ë®òÂ∏≥</button>
                    </div>
                </div>

                <div class="space-y-2">
                    <div class="flex justify-between items-end px-2">
                        <h3 class="text-sm font-bold text-kitty-light">Spending Log</h3>
                        <span class="text-kitty-red font-bold text-lg">Total: ${{ totalExpense }}</span>
                    </div>
                    <div v-for="(exp, index) in expenses" :key="index" class="bg-white p-3 rounded-2xl flex justify-between items-center shadow-sm border border-pink-50">
                        <div class="flex items-center gap-3">
                            <div :class="exp.type === '‰ø°Áî®Âç°' ? 'bg-blue-100 text-blue-500' : 'bg-green-100 text-green-500'" class="w-10 h-10 rounded-full flex items-center justify-center text-lg">
                                <i :class="exp.type === '‰ø°Áî®Âç°' ? 'ri-bank-card-fill' : 'ri-money-dollar-circle-fill'"></i>
                            </div>
                            <div>
                                <p class="text-sm font-bold text-kitty-text">{{ exp.desc }}</p>
                                <p class="text-xs text-gray-400">{{ exp.type }}</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="font-bold text-kitty-text">-${{ exp.amount }}</span>
                            <button @click="removeExpense(index)" class="text-gray-200 hover:text-kitty-red p-1"><i class="ri-delete-bin-line"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 4. Ë≥ºÁâ©Ê∏ÖÂñÆ -->
            <div v-if="currentTab === 'shopping'" class="space-y-3">
                <div class="bg-white p-2 rounded-full shadow-cute flex items-center px-4 border-2 border-kitty-pink">
                    <input v-model="newShoppingItem" @keyup.enter="addShoppingItem" type="text" placeholder="ÊÉ≥Ë≤∑ÁöÑÊù±Ë•ø..." class="flex-1 bg-transparent focus:outline-none text-sm text-kitty-text placeholder-kitty-light">
                    <button @click="addShoppingItem" class="text-kitty-pink hover:text-kitty-red transition"><i class="ri-add-circle-fill text-3xl"></i></button>
                </div>

                <div class="space-y-2 mt-4">
                    <div v-for="(item, index) in shoppingList" :key="index" 
                         class="flex items-center p-4 bg-white rounded-2xl shadow-sm transition-all duration-300 border border-transparent hover:border-pink-100"
                         :class="{'opacity-60 bg-gray-50': item.checked}">
                        <div @click="item.checked = !item.checked" class="cursor-pointer mr-3 text-2xl transition-transform hover:scale-110">
                            <i :class="item.checked ? 'ri-checkbox-circle-fill text-kitty-light' : 'ri-heart-line text-kitty-pink'"></i>
                        </div>
                        <span :class="{'line-through text-gray-400': item.checked}" class="flex-1 text-sm font-medium">{{ item.name }}</span>
                        <button @click="removeShoppingItem(index)" class="text-gray-300 hover:text-kitty-red"><i class="ri-close-line"></i></button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Navigation -->
        <nav class="bg-white rounded-t-[2rem] absolute bottom-0 w-full pb-6 pt-4 px-6 shadow-[0_-5px_20px_rgba(255,182,193,0.3)] z-20">
            <ul class="flex justify-between items-center px-2">
                <li v-for="tab in tabs" :key="tab.id">
                    <button @click="currentTab = tab.id" class="flex flex-col items-center gap-1 transition-all duration-300" :class="currentTab === tab.id ? 'text-kitty-pink -translate-y-2' : 'text-gray-300'">
                        <div class="text-2xl" :class="currentTab === tab.id ? 'bg-pink-50 p-2 rounded-full shadow-sm' : ''">
                            <i :class="tab.icon"></i>
                        </div>
                        <span class="text-[10px] font-bold tracking-wider" v-if="currentTab === tab.id">{{ tab.name }}</span>
                    </button>
                </li>
            </ul>
        </nav>
    </div>

    <script>
        const { createApp, ref, computed } = Vue;

        createApp({
            setup() {
                const currentTab = ref('schedule');
                const currentDate = new Date().toLocaleDateString('zh-HK');
                
                const tabs = [
                    { id: 'schedule', name: 'Ë°åÁ®ã', icon: 'ri-calendar-heart-fill' },
                    { id: 'map', name: 'Âú∞Âúñ', icon: 'ri-map-pin-heart-fill' },
                    { id: 'finance', name: 'Ë®òÂ∏≥', icon: 'ri-wallet-3-fill' },
                    { id: 'shopping', name: 'Ë≥ºÁâ©', icon: 'ri-shopping-bag-3-fill' }
                ];

                const currentTitle = computed(() => {
                    const tab = tabs.find(t => t.id === currentTab.value);
                    return tab ? tab.name : 'Kitty App';
                });

                // --- Ë°åÁ®ãÂäüËÉΩ ---
                const schedule = ref([
                    { time: '10:00', title: 'Sanrio Puroland', location: 'Sanrio Puroland Tokyo', weather: 'üéÄ', showMap: false },
                    { time: '13:00', title: 'ÂçàÈ§ê: ÂíñÂï°Âª≥', location: 'Shinjuku Station', weather: '‚òï', showMap: false }
                ]);
                const showScheduleForm = ref(false);
                const newSchedule = ref({ time: '', title: '', location: '', weather: '‚òÄÔ∏è' });

                const sortedSchedule = computed(() => {
                    return [...schedule.value].sort((a, b) => a.time.localeCompare(b.time));
                });

                // Áî¢Áîü Google Map Embed URL
                const getMapUrl = (location) => {
                    // ‰ΩøÁî® q=Âú∞ÈªûÂêçÁ®± ‰æÜÊêúÂ∞ã
                    return `https://maps.google.com/maps?q=${encodeURIComponent(location)}&t=&z=15&ie=UTF8&iwloc=&output=embed`;
                };

                const addScheduleItem = () => {
                    if (!newSchedule.value.time || !newSchedule.value.title) {
                        alert('Ë´ãÂ°´ÂØ´ÊôÇÈñìÂíåÊ®ôÈ°åÂñîÔºÅüéÄ');
                        return;
                    }
                    schedule.value.push({ ...newSchedule.value, showMap: false });
                    newSchedule.value = { time: '', title: '', location: '', weather: '‚òÄÔ∏è' };
                    showScheduleForm.value = false;
                };

                const removeSchedule = (index) => {
                    if(confirm('ÁúüÁöÑË¶ÅÂà™Èô§ÈÄôÂÄãË°åÁ®ãÂóéÔºüü•∫')) {
                        const itemToDelete = sortedSchedule.value[index];
                        const originalIndex = schedule.value.indexOf(itemToDelete);
                        if (originalIndex > -1) schedule.value.splice(originalIndex, 1);
                    }
                };

                // --- Ë®òÂ∏≥ÂäüËÉΩ ---
                const expenses = ref([
                    { desc: 'ÂèØÊÑõÈ´ÆÂ§æ', amount: 120, type: 'ÁèæÈáë' }
                ]);
                const newExpense = ref({ amount: '', desc: '', type: '‰ø°Áî®Âç°' });

                const totalExpense = computed(() => {
                    return expenses.value.reduce((sum, item) => sum + Number(item.amount), 0);
                });

                const addExpense = () => {
                    if (!newExpense.value.amount || !newExpense.value.desc) return;
                    expenses.value.unshift({ ...newExpense.value });
                    newExpense.value.amount = '';
                    newExpense.value.desc = '';
                };

                const removeExpense = (index) => {
                    if(confirm('Ë¶ÅÂà™Èô§ÈÄôÁ≠ÜÁ¥ÄÈåÑÂóéÔºü')) expenses.value.splice(index, 1);
                };

                // --- Ë≥ºÁâ©ÂäüËÉΩ ---
                const shoppingList = ref([
                    { name: 'Hello Kitty ÈôêÈáèÁâàÂ®ÉÂ®É', checked: false }
                ]);
                const newShoppingItem = ref('');

                const addShoppingItem = () => {
                    if (!newShoppingItem.value) return;
                    shoppingList.value.push({ name: newShoppingItem.value, checked: false });
                    newShoppingItem.value = '';
                };
                
                const removeShoppingItem = (index) => {
                    shoppingList.value.splice(index, 1);
                };

                return {
                    currentTab, tabs, currentTitle, currentDate,
                    // Schedule
                    sortedSchedule, showScheduleForm, newSchedule, addScheduleItem, removeSchedule, getMapUrl,
                    // Finance
                    expenses, newExpense, addExpense, removeExpense, totalExpense,
                    // Shopping
                    shoppingList, newShoppingItem, addShoppingItem, removeShoppingItem
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
