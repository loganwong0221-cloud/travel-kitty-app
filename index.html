<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kitty Travel App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        kitty: {
                            bg: '#FFF5F7',      /* Ê•µÊ∑∫Á≤âÂ∫ïËâ≤ */
                            card: '#FFFFFF',    
                            text: '#5D4037',    /* Ê∑±ÂíñÂï°ÊñáÂ≠ó */
                            pink: '#FF9EAC',    /* ÊüîÂíåÁ≤âÁ¥Ö */
                            hot: '#FF69B4',     /* ‰∫ÆÁ≤âÁ¥Ö */
                            red: '#E60033'      /* Kitty Ëù¥Ëù∂ÁµêÁ¥Ö */
                        }
                    },
                    fontFamily: {
                        sans: ['Varela Round', 'Arial', 'sans-serif'],
                    },
                    boxShadow: {
                        'cute': '0 8px 20px rgba(255, 158, 172, 0.25)',
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #fce4ec; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="text-kitty-text h-screen flex justify-center overflow-hidden font-sans">

    <div id="app" class="w-full max-w-md bg-kitty-bg h-full flex flex-col shadow-2xl relative overflow-hidden border-x-4 border-white">
        
        <!-- Header: ÁúüÊ≠£ÁöÑ Kitty ÂúñÁâá -->
        <header class="bg-kitty-pink px-5 py-3 shadow-md z-10 flex justify-between items-center flex-shrink-0 rounded-b-[2rem]">
            <div class="flex items-center gap-2">
                <!-- Kitty È†≠ÂÉèÂúñÁâá -->
                <img src="https://upload.wikimedia.org/wikipedia/en/thumb/0/05/Hello_kitty_character_portrait.png/220px-Hello_kitty_character_portrait.png" 
                     class="w-10 h-10 object-contain drop-shadow-md bg-white rounded-full p-1" 
                     alt="Kitty">
                <h1 class="text-lg font-bold text-white tracking-wide drop-shadow-sm">{{ currentTitle }}</h1>
            </div>
            <div class="text-[10px] bg-white text-kitty-pink px-3 py-1 rounded-full font-bold shadow-sm">
                {{ currentDate }}
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto p-4 space-y-4 no-scrollbar pb-24">
            
            <!-- 1. Ë°åÁ®ãË°®ÂäüËÉΩ -->
            <div v-if="currentTab === 'schedule'" class="space-y-4">
                <button v-if="!showScheduleForm" @click="showScheduleForm = true" class="w-full py-3 bg-white border-2 border-dashed border-kitty-pink rounded-3xl text-kitty-pink hover:bg-kitty-pink hover:text-white transition flex justify-center items-center gap-2 font-bold shadow-sm">
                    <i class="ri-add-line text-xl"></i> Ê∑ªÂä†Êñ∞Ë°åÁ®ã
                </button>

                <!-- Ë°®ÂñÆ -->
                <div v-if="showScheduleForm" class="bg-white p-5 rounded-3xl shadow-cute border-2 border-kitty-pink relative">
                    <button @click="showScheduleForm = false" class="absolute top-3 right-3 text-kitty-pink"><i class="ri-close-circle-fill text-2xl"></i></button>
                    <h3 class="text-center text-kitty-pink font-bold mb-4">‚ú® New Plan ‚ú®</h3>
                    <div class="space-y-3">
                        <div class="flex gap-2">
                            <input type="time" v-model="newSchedule.time" class="bg-pink-50 rounded-xl p-2 text-sm w-1/3 outline-none text-kitty-text">
                            <select v-model="newSchedule.weather" class="bg-pink-50 rounded-xl p-2 text-sm flex-1 outline-none text-kitty-text">
                                <option value="‚òÄÔ∏è">‚òÄÔ∏è Êô¥Â§©</option>
                                <option value="üåßÔ∏è">üåßÔ∏è Èõ®Â§©</option>
                                <option value="üéÄ">üéÄ ÈÄõË°ó</option>
                            </select>
                        </div>
                        <input type="text" v-model="newSchedule.title" placeholder="Ê®ôÈ°å..." class="w-full bg-pink-50 rounded-xl p-3 text-sm outline-none focus:ring-2 focus:ring-kitty-pink">
                        <input type="text" v-model="newSchedule.location" placeholder="Âú∞Èªû (Google Map)..." class="w-full bg-pink-50 rounded-xl p-3 text-sm outline-none focus:ring-2 focus:ring-kitty-pink">
                        <button @click="addScheduleItem" class="w-full bg-kitty-pink text-white py-2 rounded-xl font-bold shadow-md hover:bg-kitty-hot transition">Âä†ÂÖ•Ë°åÁ®ã üíñ</button>
                    </div>
                </div>

                <!-- ÂàóË°® -->
                <div class="space-y-3">
                    <div v-for="(item, index) in sortedSchedule" :key="index" class="bg-white p-4 rounded-3xl shadow-sm border border-pink-100 relative">
                        <div class="flex items-start">
                            <div class="flex flex-col items-center mr-3 bg-pink-50 rounded-2xl py-2 w-14">
                                <span class="text-xl mb-1">{{ item.weather }}</span>
                                <span class="text-[10px] font-bold text-kitty-pink">{{ item.time }}</span>
                            </div>
                            <div class="flex-1 pt-1">
                                <h3 class="font-bold text-md text-kitty-text">{{ item.title }}</h3>
                                <div v-if="item.location" class="flex items-center gap-1 text-xs text-gray-400 mt-1">
                                    <i class="ri-map-pin-line text-kitty-pink"></i>
                                    <span>{{ item.location }}</span>
                                </div>
                            </div>
                            <button @click="removeSchedule(index)" class="text-gray-300 hover:text-kitty-red"><i class="ri-delete-bin-line"></i></button>
                        </div>
                        
                        <!-- Map Toggle -->
                        <div v-if="item.location" class="mt-2">
                            <button @click="item.showMap = !item.showMap" class="w-full text-xs text-kitty-pink bg-pink-50 py-1 rounded-lg font-bold">
                                {{ item.showMap ? 'Êî∂Ëµ∑Âú∞Âúñ' : 'üìç Êü•ÁúãÂú∞Âúñ' }}
                            </button>
                            <div v-if="item.showMap" class="mt-2 h-40 rounded-xl overflow-hidden shadow-inner border-2 border-pink-100">
                                <iframe width="100%" height="100%" frameborder="0" style="border:0" :src="getMapUrl(item.location)" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2. Âú∞Âúñ -->
            <div v-if="currentTab === 'map'" class="h-full bg-white rounded-3xl overflow-hidden shadow-cute border-4 border-white relative min-h-[500px]">
                <iframe width="100%" height="100%" frameborder="0" scrolling="no" src="https://maps.google.com/maps?q=Tokyo&t=&z=13&ie=UTF8&iwloc=&output=embed"></iframe>
                <div class="absolute top-4 left-4 bg-white px-3 py-1 rounded-full shadow-lg text-kitty-pink font-bold border-2 border-kitty-pink text-xs">
                    üìç Kitty Map
                </div>
            </div>

            <!-- 3. Ë®òÂ∏≥ -->
            <div v-if="currentTab === 'finance'" class="space-y-4">
                <div class="bg-white p-5 rounded-3xl shadow-cute border border-pink-100">
                    <div class="mb-3">
                        <label class="text-xs text-kitty-pink font-bold ml-1">ÈáëÈ°ç $$$</label>
                        <input type="number" v-model="newExpense.amount" placeholder="0.00" class="w-full text-3xl font-bold text-kitty-text border-b-2 border-pink-100 outline-none focus:border-kitty-pink pb-1 bg-transparent">
                    </div>
                    <div class="mb-3">
                        <label class="text-xs text-kitty-pink font-bold ml-1">È†ÖÁõÆ</label>
                        <input type="text" v-model="newExpense.desc" placeholder="Ë≤∑‰∫Ü‰ªÄÈ∫º..." class="w-full text-sm border-b-2 border-pink-100 outline-none focus:border-kitty-pink pb-1 bg-transparent">
                    </div>
                    <div class="flex gap-2">
                        <select v-model="newExpense.type" class="bg-pink-50 text-sm p-2 rounded-xl outline-none text-kitty-text font-bold">
                            <option value="‰ø°Áî®Âç°">üí≥ ‰ø°Áî®Âç°</option>
                            <option value="ÁèæÈáë">üíµ ÁèæÈáë</option>
                        </select>
                        <button @click="addExpense" class="flex-1 bg-kitty-pink text-white rounded-xl text-sm font-bold shadow-md hover:bg-kitty-hot">Ë®òÂ∏≥</button>
                    </div>
                </div>
                <div class="space-y-2">
                    <div class="flex justify-between items-end px-2">
                        <h3 class="text-xs font-bold text-gray-400">Spending Log</h3>
                        <span class="text-kitty-red font-bold">Total: ${{ totalExpense }}</span>
                    </div>
                    <div v-for="(exp, index) in expenses" :key="index" class="bg-white p-3 rounded-2xl flex justify-between items-center shadow-sm border border-pink-50">
                        <div class="flex items-center gap-3">
                            <div :class="exp.type === '‰ø°Áî®Âç°' ? 'bg-blue-100 text-blue-500' : 'bg-green-100 text-green-500'" class="w-8 h-8 rounded-full flex items-center justify-center">
                                <i :class="exp.type === '‰ø°Áî®Âç°' ? 'ri-bank-card-fill' : 'ri-money-dollar-circle-fill'"></i>
                            </div>
                            <div>
                                <p class="text-sm font-bold text-kitty-text">{{ exp.desc }}</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="font-bold text-kitty-text text-sm">-${{ exp.amount }}</span>
                            <button @click="removeExpense(index)" class="text-gray-300 hover:text-kitty-red"><i class="ri-delete-bin-line"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 4. Ë≥ºÁâ© -->
            <div v-if="currentTab === 'shopping'" class="space-y-3">
                <div class="bg-white p-2 rounded-full shadow-cute flex items-center px-4 border-2 border-kitty-pink">
                    <input v-model="newShoppingItem" @keyup.enter="addShoppingItem" type="text" placeholder="ÊÉ≥Ë≤∑ÁöÑÊù±Ë•ø..." class="flex-1 bg-transparent outline-none text-sm text-kitty-text">
                    <button @click="addShoppingItem" class="text-kitty-pink hover:text-kitty-hot"><i class="ri-add-circle-fill text-3xl"></i></button>
                </div>
                <div class="space-y-2 mt-4">
                    <div v-for="(item, index) in shoppingList" :key="index" class="flex items-center p-3 bg-white rounded-2xl shadow-sm border hover:border-pink-200 transition-all" :class="{'opacity-60': item.checked}">
                        <div @click="item.checked = !item.checked" class="cursor-pointer mr-3 text-2xl text-kitty-pink">
                            <i :class="item.checked ? 'ri-checkbox-circle-fill text-gray-300' : 'ri-heart-fill'"></i>
                        </div>
                        <span :class="{'line-through text-gray-400': item.checked}" class="flex-1 text-sm font-medium">{{ item.name }}</span>
                        <button @click="removeShoppingItem(index)" class="text-gray-300 hover:text-kitty-red"><i class="ri-close-line"></i></button>
                    </div>
                </div>
            </div>
        </main>

        <!-- ‰øÆÊ≠£ÂæåÁöÑÂ∞éËà™Ê¨ÑÔºö‰ΩøÁî® Grid ÊéíÁâàÁ¢∫‰øù‰∏çË∑ëÁâà -->
        <nav class="bg-white rounded-t-[2rem] absolute bottom-0 w-full shadow-[0_-5px_20px_rgba(255,182,193,0.4)] z-50">
            <div class="grid grid-cols-4 w-full h-20 items-center">
                <button v-for="tab in tabs" :key="tab.id" 
                        @click="currentTab = tab.id" 
                        class="flex flex-col items-center justify-center gap-1 h-full w-full transition-all duration-300 relative group">
                    
                    <!-- ÈÅ∏‰∏≠ÊôÇÁöÑÁ≤âÁ¥ÖËÉåÊôØÊ≥°Ê≥° -->
                    <div v-if="currentTab === tab.id" 
                         class="absolute top-2 w-12 h-12 bg-pink-100 rounded-full -z-10 animate-pulse"></div>

                    <i :class="tab.icon" class="text-2xl transition-transform duration-300"
                       :class="currentTab === tab.id ? 'text-kitty-hot scale-110 -translate-y-1' : 'text-gray-300 group-hover:text-pink-300'"></i>
                    
                    <span class="text-[10px] font-bold"
                          :class="currentTab === tab.id ? 'text-kitty-hot' : 'text-gray-400'">
                        {{ tab.name }}
                    </span>
                </button>
            </div>
        </nav>
    </div>

    <script>
        const { createApp, ref, computed } = Vue;

        createApp({
            setup() {
                const currentTab = ref('schedule');
                const currentDate = new Date().toLocaleDateString('zh-HK');
                
                const tabs = [
                    { id: 'schedule', name: 'Ë°åÁ®ã', icon: 'ri-calendar-todo-fill' },
                    { id: 'map', name: 'Âú∞Âúñ', icon: 'ri-map-pin-user-fill' },
                    { id: 'finance', name: 'Ë®òÂ∏≥', icon: 'ri-wallet-3-fill' },
                    { id: 'shopping', name: 'Ë≥ºÁâ©', icon: 'ri-shopping-bag-heart-fill' }
                ];

                const currentTitle = computed(() => {
                    const tab = tabs.find(t => t.id === currentTab.value);
                    return tab ? tab.name : 'Kitty App';
                });

                // Schedule
                const schedule = ref([
                    { time: '10:00', title: 'Sanrio Puroland', location: 'Sanrio Puroland Tokyo', weather: 'üéÄ', showMap: false }
                ]);
                const showScheduleForm = ref(false);
                const newSchedule = ref({ time: '', title: '', location: '', weather: '‚òÄÔ∏è' });
                const sortedSchedule = computed(() => [...schedule.value].sort((a, b) => a.time.localeCompare(b.time)));
                const getMapUrl = (loc) => `https://maps.google.com/maps?q=${encodeURIComponent(loc)}&t=&z=15&ie=UTF8&iwloc=&output=embed`;
                const addScheduleItem = () => {
                    if (!newSchedule.value.time || !newSchedule.value.title) return;
                    schedule.value.push({ ...newSchedule.value, showMap: false });
                    newSchedule.value = { time: '', title: '', location: '', weather: '‚òÄÔ∏è' };
                    showScheduleForm.value = false;
                };
                const removeSchedule = (index) => {
                    const item = sortedSchedule.value[index];
                    const idx = schedule.value.indexOf(item);
                    if (idx > -1) schedule.value.splice(idx, 1);
                };

                // Finance
                const expenses = ref([{ desc: 'ÂèØÊÑõÈ´ÆÂ§æ', amount: 120, type: 'ÁèæÈáë' }]);
                const newExpense = ref({ amount: '', desc: '', type: '‰ø°Áî®Âç°' });
                const totalExpense = computed(() => expenses.value.reduce((s, i) => s + Number(i.amount), 0));
                const addExpense = () => {
                    if (!newExpense.value.amount || !newExpense.value.desc) return;
                    expenses.value.unshift({ ...newExpense.value });
                    newExpense.value.amount = ''; newExpense.value.desc = '';
                };
                const removeExpense = (index) => expenses.value.splice(index, 1);

                // Shopping
                const shoppingList = ref([{ name: 'Kitty ÈôêÈáèÂ®ÉÂ®É', checked: false }]);
                const newShoppingItem = ref('');
                const addShoppingItem = () => {
                    if (!newShoppingItem.value) return;
                    shoppingList.value.push({ name: newShoppingItem.value, checked: false });
                    newShoppingItem.value = '';
                };
                const removeShoppingItem = (index) => shoppingList.value.splice(index, 1);

                return {
                    currentTab, tabs, currentTitle, currentDate,
                    sortedSchedule, showScheduleForm, newSchedule, addScheduleItem, removeSchedule, getMapUrl,
                    expenses, newExpense, addExpense, removeExpense, totalExpense,
                    shoppingList, newShoppingItem, addShoppingItem, removeShoppingItem
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
